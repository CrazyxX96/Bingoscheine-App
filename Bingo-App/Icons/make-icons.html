<!DOCTYPE html>
<html lang="de">
<meta charset="utf-8">
<title>Icon-Generator</title>
<style>
  body{font-family:system-ui,Arial,sans-serif;margin:20px}
  .row{display:flex;gap:12px;flex-wrap:wrap;align-items:center}
  canvas{border:1px solid #ddd;border-radius:16px}
  label{display:block;margin:8px 0 4px}
  input,button{font-size:16px;padding:8px 10px;border:1px solid #ccc;border-radius:8px}
</style>
<body>
<h1>Icon-Generator</h1>
<p>Gib deinen Buchstaben/Text ein (z. B. „Bingo“ oder „B“) und lade die PNGs herunter. Lege sie anschließend im Ordner <code>icons/</code> ab.</p>

<div class="row">
  <label>Text:</label>
  <input id="txt" value="Bingo">
  <label>Hintergrund:</label>
  <input id="bg" type="color" value="#2F4A93">
  <label>Textfarbe:</label>
  <input id="fg" type="color" value="#ffffff">
</div>

<p><button onclick="render()">Vorschau aktualisieren</button></p>

<div class="row">
  <div>
    <h3>192×192</h3>
    <canvas id="c192" width="192" height="192"></canvas><br>
    <button onclick="download('c192','icon-192.png')">PNG herunterladen</button>
  </div>
  <div>
    <h3>512×512</h3>
    <canvas id="c512" width="512" height="512"></canvas><br>
    <button onclick="download('c512','icon-512.png')">PNG herunterladen</button>
  </div>
  <div>
    <h3>Maskable 512×512</h3>
    <canvas id="cm512" width="512" height="512"></canvas><br>
    <button onclick="download('cm512','maskable-512.png')">PNG herunterladen</button>
  </div>
  <div>
    <h3>Apple Touch 180×180</h3>
    <canvas id="cat" width="180" height="180"></canvas><br>
    <button onclick="download('cat','apple-touch-icon.png')">PNG herunterladen</button>
  </div>
</div>

<script>
function drawIcon(canvas, text, bg, fg, padding=0.12, maskable=false){
  const ctx=canvas.getContext('2d');
  const W=canvas.width, H=canvas.height;
  ctx.clearRect(0,0,W,H);

  if(maskable){
    // maskable: Inhalt geht bis zum Rand (für adaptive Masken)
    ctx.fillStyle=bg; ctx.fillRect(0,0,W,H);
  }else{
    // runde Ecken (nur Optik)
    const r=Math.min(W,H)*0.18;
    ctx.fillStyle=bg;
    ctx.beginPath();
    ctx.moveTo(r,0); ctx.arcTo(W,0,W,H,r); ctx.arcTo(W,H,0,H,r); ctx.arcTo(0,H,0,0,r); ctx.arcTo(0,0,W,0,r); ctx.closePath();
    ctx.fill();
  }

  // Text
  ctx.fillStyle=fg;
  ctx.textAlign='center';
  ctx.textBaseline='middle';

  // Dynamische Schriftgröße
  let fontSize = W * (1 - padding*2);
  ctx.font = `bold ${fontSize}px system-ui, Arial`;
  // Falls zu breit, iterativ kleiner
  while(ctx.measureText(text).width > W*(1 - padding*2)){
    fontSize -= 2;
    ctx.font = `bold ${fontSize}px system-ui, Arial`;
    if(fontSize<10) break;
  }
  ctx.fillText(text, W/2, H/2);
}

function render(){
  const text=document.getElementById('txt').value||'Bingo';
  const bg=document.getElementById('bg').value||'#2F4A93';
  const fg=document.getElementById('fg').value||'#ffffff';
  drawIcon(document.getElementById('c192'), text, bg, fg);
  drawIcon(document.getElementById('c512'), text, bg, fg);
  drawIcon(document.getElementById('cm512'), text, bg, fg, 0.08, true);
  drawIcon(document.getElementById('cat'), text, bg, fg);
}
function download(id, name){
  const url=document.getElementById(id).toDataURL('image/png');
  const a=document.createElement('a'); a.href=url; a.download=name; a.click();
}
render();
</script>
</body>
</html>
